@(request: controllers.AuthenticatedRequest[AnyContent])
@import deployment.DeployInfoManager._

@main("Deployment Information", request) {

<h2>Deployment Information</h2>

<h3>Keys</h3>
<hr/>

<table class="table">
    <thead><tr>
        <th>App</th>
        @deployInfo.knownKeyStages.map{ stage => <th>@stage.toString</th> }
    </tr></thead>
    <tbody>
    @deployInfo.knownKeyApps.map { app =>
    <tr>
        <td><strong>@app.toString</strong></td>
        @deployInfo.knownKeyStages.map{ stage =>
        <td>
            @if(deployInfo.stageAppToKeyMap.contains((stage,app))) {
            <ul>
                @deployInfo.stageAppToKeyMap((stage,app)).map { key => <li>@key.key @key.comment.map{ c => (@c) }</li> }
            </ul>
            } else {
            -
            }
        </td>
        }
    </tr>
    }
    </tbody>
</table>

<h3>Hosts</h3>
<hr/>

<table class="table">
    <thead><tr>
        <th>App</th>
        @deployInfo.knownHostStages.map{ stage => <th>@stage</th> }
    </tr></thead>
    <tbody>
@deployInfo.knownHostApps.map { appSet =>
    <tr>
    <td><strong>@appSet.map(_.name).mkString(", ")</strong></td>
        @deployInfo.knownHostStages.map{ stage =>
        <td>
        @if(deployInfo.stageAppToHostMap.contains((stage,appSet))) {
        <ul>
            @deployInfo.stageAppToHostMap((stage,appSet)).map { host => <li>@host.name</li> }
        </ul>
            } else {
            -
            }
        </td>
        }
    </tr>
}
    </tbody>
</table>

}